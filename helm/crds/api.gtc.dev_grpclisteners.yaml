---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.9.2
  creationTimestamp: null
  name: grpclisteners.api.gtc.dev
spec:
  group: api.gtc.dev
  names:
    kind: GRPCListener
    listKind: GRPCListenerList
    plural: grpclisteners
    singular: grpclistener
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: GRPCListener is the Schema for the services API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: GRPCListenerSpec defines the desired state of Service
            properties:
              interceptors:
                description: Interceptors represent the list of interceptors applied
                  globally in this listener.
                items:
                  properties:
                    fault:
                      description: Fault Interceptor configuration.
                      properties:
                        abort:
                          description: Abort the call.
                          properties:
                            code:
                              description: Returns the gRPC status code.
                              format: int32
                              type: integer
                            metadata:
                              description: Metadata adds a fault controlled by an
                                call metadata.
                              type: object
                            percentage:
                              description: Percentage controls how much this fault
                                will occur.
                              properties:
                                denominator:
                                  default: hundred
                                  description: Denominator of the fration.
                                  enum:
                                  - hundred
                                  - ten_thousand
                                  - million
                                  type: string
                                numerator:
                                  description: Numerator of the fraction
                                  format: int32
                                  type: integer
                              type: object
                          type: object
                        delay:
                          description: Inject a delay.
                          properties:
                            fixed:
                              description: FixedDelay adds a fixed delay before a
                                call.
                              type: string
                            metadata:
                              description: Metadata adds a fault controlled by an
                                call metadata.
                              type: object
                            percentage:
                              description: Percentage controls how much this fault
                                will occur.
                              properties:
                                denominator:
                                  default: hundred
                                  description: Denominator of the fration.
                                  enum:
                                  - hundred
                                  - ten_thousand
                                  - million
                                  type: string
                                numerator:
                                  description: Numerator of the fraction
                                  format: int32
                                  type: integer
                              type: object
                          type: object
                        headers:
                          description: Specifies a set of headers that the filter
                            should match on.
                          items:
                            description: HeaderMatcher indicates a match based on
                              an http header.
                            properties:
                              exact:
                                description: Match the exact value of a header.
                                type: string
                              invert:
                                description: Invert that header match.
                                type: boolean
                              name:
                                description: Name of the header to match.
                                type: string
                              prefix:
                                description: Header value must have a prefix.
                                type: string
                              present:
                                description: Header must be present.
                                type: boolean
                              range:
                                description: Header Value must match a range.
                                properties:
                                  end:
                                    description: End of the range (exclusive)
                                    format: int64
                                    type: integer
                                  start:
                                    description: Start of the range (inclusive)
                                    format: int64
                                    type: integer
                                type: object
                              regex:
                                description: Match a regex. Must match the whole value.
                                properties:
                                  engine:
                                    default: re2
                                    description: The regexp engine to use.
                                    enum:
                                    - re2
                                    type: string
                                  regex:
                                    description: Regexp to evaluate the path against.
                                    type: string
                                type: object
                              suffix:
                                description: Header value must have a suffix.
                                type: string
                            type: object
                          type: array
                        maxActiveFaults:
                          description: The maximum number of faults that can be active
                            at a single time.
                          format: int32
                          type: integer
                      type: object
                  type: object
                type: array
              maxStreamDuration:
                description: MaxStreamDuration is the total duration to keep alive
                  an HTTP request/response stream. If the time limit is reached the
                  stream will be reset independent of any other timeouts. If not specified,
                  this value is not set.
                type: string
              retry:
                description: Retry indicates a retry policy to be applied on every
                  route of this listener.
                properties:
                  backoff:
                    description: Specifies parameters that control exponential retry
                      back off. This parameter is optional, in which case the default
                      base interval is 25 milliseconds
                    properties:
                      baseInterval:
                        description: Specifies the base interval between retries.
                          This parameter is required and must be greater than zero.
                          Values less than 1 ms are rounded up to 1 ms.
                        type: string
                      maxInterval:
                        description: Specifies the maximum interval between retries.
                          This parameter is optional, but must be greater than or
                          equal to the base_interval if set. The default is 10 times
                          the base_interval
                        type: string
                    type: object
                  numRetries:
                    default: 1
                    description: Specifies the allowed number of retries. This parameter
                      is optional and defaults to 1.
                    format: int32
                    type: integer
                  retryOn:
                    description: Specifies the conditions under which retry takes
                      place.
                    items:
                      type: string
                    type: array
                type: object
              routes:
                description: Routes lists all the routes defined for an GRPCListener.
                items:
                  description: Route allows to match an outoing request to a specific
                    cluster, it allows to do HTTP level manipulation on the outgoing
                    requests as well as matching.
                  properties:
                    backends:
                      description: Backends is the list of all backends serving that
                        route.
                      items:
                        description: Backend is a group of backend servers serving
                          the same services.
                        properties:
                          interceptors:
                            description: Interceptors are a list of interceptor overrides
                              to apply to this backend. Note that the interceptors
                              defined here must me also defined at the listener level.
                            items:
                              properties:
                                fault:
                                  description: Fault Interceptor configuration.
                                  properties:
                                    abort:
                                      description: Abort the call.
                                      properties:
                                        code:
                                          description: Returns the gRPC status code.
                                          format: int32
                                          type: integer
                                        metadata:
                                          description: Metadata adds a fault controlled
                                            by an call metadata.
                                          type: object
                                        percentage:
                                          description: Percentage controls how much
                                            this fault will occur.
                                          properties:
                                            denominator:
                                              default: hundred
                                              description: Denominator of the fration.
                                              enum:
                                              - hundred
                                              - ten_thousand
                                              - million
                                              type: string
                                            numerator:
                                              description: Numerator of the fraction
                                              format: int32
                                              type: integer
                                          type: object
                                      type: object
                                    delay:
                                      description: Inject a delay.
                                      properties:
                                        fixed:
                                          description: FixedDelay adds a fixed delay
                                            before a call.
                                          type: string
                                        metadata:
                                          description: Metadata adds a fault controlled
                                            by an call metadata.
                                          type: object
                                        percentage:
                                          description: Percentage controls how much
                                            this fault will occur.
                                          properties:
                                            denominator:
                                              default: hundred
                                              description: Denominator of the fration.
                                              enum:
                                              - hundred
                                              - ten_thousand
                                              - million
                                              type: string
                                            numerator:
                                              description: Numerator of the fraction
                                              format: int32
                                              type: integer
                                          type: object
                                      type: object
                                    headers:
                                      description: Specifies a set of headers that
                                        the filter should match on.
                                      items:
                                        description: HeaderMatcher indicates a match
                                          based on an http header.
                                        properties:
                                          exact:
                                            description: Match the exact value of
                                              a header.
                                            type: string
                                          invert:
                                            description: Invert that header match.
                                            type: boolean
                                          name:
                                            description: Name of the header to match.
                                            type: string
                                          prefix:
                                            description: Header value must have a
                                              prefix.
                                            type: string
                                          present:
                                            description: Header must be present.
                                            type: boolean
                                          range:
                                            description: Header Value must match a
                                              range.
                                            properties:
                                              end:
                                                description: End of the range (exclusive)
                                                format: int64
                                                type: integer
                                              start:
                                                description: Start of the range (inclusive)
                                                format: int64
                                                type: integer
                                            type: object
                                          regex:
                                            description: Match a regex. Must match
                                              the whole value.
                                            properties:
                                              engine:
                                                default: re2
                                                description: The regexp engine to
                                                  use.
                                                enum:
                                                - re2
                                                type: string
                                              regex:
                                                description: Regexp to evaluate the
                                                  path against.
                                                type: string
                                            type: object
                                          suffix:
                                            description: Header value must have a
                                              suffix.
                                            type: string
                                        type: object
                                      type: array
                                    maxActiveFaults:
                                      description: The maximum number of faults that
                                        can be active at a single time.
                                      format: int32
                                      type: integer
                                  type: object
                              type: object
                            type: array
                          localities:
                            description: Localities is a list of prioritized and weighted
                              localities for a backend.
                            items:
                              description: Locality is a weighted and prioritized
                                locality for a backend.
                              properties:
                                priority:
                                  description: Priority of the locality, if defined,
                                    all entries must unique for a given priority and
                                    priority should be defined without any gap.
                                  format: int32
                                  type: integer
                                service:
                                  description: Service is a reference to a kubernetes
                                    service.
                                  properties:
                                    name:
                                      type: string
                                    namespace:
                                      type: string
                                    port:
                                      description: PortRef represents a reference
                                        to a port. This could be done either by number
                                        or by name.
                                      maxProperties: 1
                                      properties:
                                        name:
                                          type: string
                                        number:
                                          format: int32
                                          type: integer
                                      type: object
                                  type: object
                                weight:
                                  default: 1
                                  description: Weight of the locality, defaults to
                                    one.
                                  format: int32
                                  type: integer
                              type: object
                            type: array
                          maxRequests:
                            description: MaxRequests qualifies the maximum number
                              of parallel requests allowd to the upstream cluster.
                            format: int32
                            type: integer
                          service:
                            description: Service is a reference to a k8s service.
                            properties:
                              name:
                                type: string
                              namespace:
                                type: string
                              port:
                                description: PortRef represents a reference to a port.
                                  This could be done either by number or by name.
                                maxProperties: 1
                                properties:
                                  name:
                                    type: string
                                  number:
                                    format: int32
                                    type: integer
                                type: object
                            type: object
                          weight:
                            default: 1
                            description: Weight is the weight of this cluster.
                            format: int32
                            type: integer
                        type: object
                      type: array
                    grpcTimeoutHeaderMax:
                      description: Specifies the maximum duration allowed for streams
                        on the route. If present, and the request contains a `grpc-timeout
                        header <https://github.com/grpc/grpc/blob/master/doc/PROTOCOL-HTTP2.md>`_,
                        use that value as the *max_stream_duration*, but limit the
                        applied timeout to the maximum value specified here. If set
                        to 0, the `grpc-timeout` header is used without modification.
                      type: string
                    interceptors:
                      description: Interceptors are a list of interceptor overrides
                        to apply to this route. Note that the interceptors defined
                        here must me also defined at the listener level.
                      items:
                        properties:
                          fault:
                            description: Fault Interceptor configuration.
                            properties:
                              abort:
                                description: Abort the call.
                                properties:
                                  code:
                                    description: Returns the gRPC status code.
                                    format: int32
                                    type: integer
                                  metadata:
                                    description: Metadata adds a fault controlled
                                      by an call metadata.
                                    type: object
                                  percentage:
                                    description: Percentage controls how much this
                                      fault will occur.
                                    properties:
                                      denominator:
                                        default: hundred
                                        description: Denominator of the fration.
                                        enum:
                                        - hundred
                                        - ten_thousand
                                        - million
                                        type: string
                                      numerator:
                                        description: Numerator of the fraction
                                        format: int32
                                        type: integer
                                    type: object
                                type: object
                              delay:
                                description: Inject a delay.
                                properties:
                                  fixed:
                                    description: FixedDelay adds a fixed delay before
                                      a call.
                                    type: string
                                  metadata:
                                    description: Metadata adds a fault controlled
                                      by an call metadata.
                                    type: object
                                  percentage:
                                    description: Percentage controls how much this
                                      fault will occur.
                                    properties:
                                      denominator:
                                        default: hundred
                                        description: Denominator of the fration.
                                        enum:
                                        - hundred
                                        - ten_thousand
                                        - million
                                        type: string
                                      numerator:
                                        description: Numerator of the fraction
                                        format: int32
                                        type: integer
                                    type: object
                                type: object
                              headers:
                                description: Specifies a set of headers that the filter
                                  should match on.
                                items:
                                  description: HeaderMatcher indicates a match based
                                    on an http header.
                                  properties:
                                    exact:
                                      description: Match the exact value of a header.
                                      type: string
                                    invert:
                                      description: Invert that header match.
                                      type: boolean
                                    name:
                                      description: Name of the header to match.
                                      type: string
                                    prefix:
                                      description: Header value must have a prefix.
                                      type: string
                                    present:
                                      description: Header must be present.
                                      type: boolean
                                    range:
                                      description: Header Value must match a range.
                                      properties:
                                        end:
                                          description: End of the range (exclusive)
                                          format: int64
                                          type: integer
                                        start:
                                          description: Start of the range (inclusive)
                                          format: int64
                                          type: integer
                                      type: object
                                    regex:
                                      description: Match a regex. Must match the whole
                                        value.
                                      properties:
                                        engine:
                                          default: re2
                                          description: The regexp engine to use.
                                          enum:
                                          - re2
                                          type: string
                                        regex:
                                          description: Regexp to evaluate the path
                                            against.
                                          type: string
                                      type: object
                                    suffix:
                                      description: Header value must have a suffix.
                                      type: string
                                  type: object
                                type: array
                              maxActiveFaults:
                                description: The maximum number of faults that can
                                  be active at a single time.
                                format: int32
                                type: integer
                            type: object
                        type: object
                      type: array
                    matcher:
                      description: Matcher define a way of matching a specific route.
                      properties:
                        fraction:
                          description: Fraction allows to match a certain percentage
                            of calls.
                          properties:
                            denominator:
                              default: hundred
                              description: Denominator of the fration.
                              enum:
                              - hundred
                              - ten_thousand
                              - million
                              type: string
                            numerator:
                              description: Numerator of the fraction
                              format: int32
                              type: integer
                          type: object
                        metadata:
                          description: Metadata allows to match on a specific set
                            of call metadata.
                          items:
                            properties:
                              exact:
                                description: Match the exact value of a header.
                                type: string
                              invert:
                                description: Invert that header match.
                                type: boolean
                              name:
                                description: Name of the metadata to match.
                                type: string
                              prefix:
                                description: Header value must have a prefix.
                                type: string
                              present:
                                description: Header must be present.
                                type: boolean
                              range:
                                description: Header Value must match a range.
                                properties:
                                  end:
                                    description: End of the range (exclusive)
                                    format: int64
                                    type: integer
                                  start:
                                    description: Start of the range (inclusive)
                                    format: int64
                                    type: integer
                                type: object
                              regex:
                                description: Match a regex. Must match the whole value.
                                properties:
                                  engine:
                                    default: re2
                                    description: The regexp engine to use.
                                    enum:
                                    - re2
                                    type: string
                                  regex:
                                    description: Regexp to evaluate the path against.
                                    type: string
                                type: object
                              suffix:
                                description: Header value must have a suffix.
                                type: string
                            type: object
                          type: array
                        method:
                          description: Method allows to match a specific method of
                            a grpc service.
                          properties:
                            method:
                              type: string
                            namespace:
                              type: string
                            service:
                              type: string
                          type: object
                        namespace:
                          description: Namespace allows to match a specific namespace.
                          type: string
                        service:
                          description: Service allows to match a specific service.
                          properties:
                            namespace:
                              type: string
                            service:
                              type: string
                          type: object
                      type: object
                    maxStreamDuration:
                      description: Only handle a fraction of matching requests. RuntimeFraction
                        *Fraction `json:"fraction,omitempty"` Specifies the maximum
                        duration allowed for streams on the route.
                      type: string
                    retry:
                      description: Retry indicates a retry policy to be applied for
                        this route.
                      properties:
                        backoff:
                          description: Specifies parameters that control exponential
                            retry back off. This parameter is optional, in which case
                            the default base interval is 25 milliseconds
                          properties:
                            baseInterval:
                              description: Specifies the base interval between retries.
                                This parameter is required and must be greater than
                                zero. Values less than 1 ms are rounded up to 1 ms.
                              type: string
                            maxInterval:
                              description: Specifies the maximum interval between
                                retries. This parameter is optional, but must be greater
                                than or equal to the base_interval if set. The default
                                is 10 times the base_interval
                              type: string
                          type: object
                        numRetries:
                          default: 1
                          description: Specifies the allowed number of retries. This
                            parameter is optional and defaults to 1.
                          format: int32
                          type: integer
                        retryOn:
                          description: Specifies the conditions under which retry
                            takes place.
                          items:
                            type: string
                          type: array
                      type: object
                  type: object
                type: array
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
